/** *     Copyright © Benjamin S. Berman, 2012 *     All Rights Reserved * This file is part of multics. multics is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. multics is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details. You should have received a copy of the GNU General Public License along with multics.  If not, see <http://www.gnu.org/licenses/>. * */package  {	import flash.net.URLRequest;	import flash.net.URLRequestMethod;	import flash.net.URLLoader;	import flash.net.URLLoaderDataFormat;	import flash.net.URLVariables;	import flash.events.Event;	import flash.events.IOErrorEvent;	import flash.errors.IOError;		public class EmailProgram {		protected var _typewriter:Typewriter;        protected var _sendEmailScript:String;		public function EmailProgram(typewriter:Typewriter) {			_typewriter = typewriter;		}		public function sendEmail():void {			var loader:URLLoader = new URLLoader();			var message:URLRequest = new URLRequest(_sendEmailScript);			message.method = URLRequestMethod.POST;			loader.dataFormat = URLLoaderDataFormat.VARIABLES;			var variables = new URLVariables();						_typewriter.readLine(function (u:String):void {				variables.sender_mail = u;				trace(u)					_typewriter.readLine(function (f:String):void {                         variables.destination_addr = f;                         trace(f)                         _typewriter.readLine(function (f:String):void {                            variables.sender_subject = f;                            trace(f)                            _typewriter.readLine(function (f:String):void {                                 variables.sender_message = f;                                 trace(f)                                 message.data = variables;                                 loader.addEventListener(Event.COMPLETE, function (e:Event):void {                                    _typewriter.writeLine("EMAIL SENT.");                                    trace(URLLoader(e.target).data.output);                                 });                                 loader.addEventListener(IOErrorEvent.IO_ERROR, function (e:IOError):void {                                    _typewriter.writeLine("A NETWORK ERROR OCCURRED. COULD NOT SEND MESSAGE.");                                 });                                 loader.load(message);                                 }, "WHAT IS THE BODY OF THE MESSAGE? PLEASE TYPE EOFAT THE END OF THE LAST LINE OF YOUR MESSAGE BODY", true);                            }, "WHAT IS THE SUBJECT OF THE MESSAGE?");                         }, "WHAT IS THE RECIPIENT'S E-MAIL ADDRESS?");				}, "WHAT IS YOUR E-MAIL ADDRESS?");		}	}	}