package  {	import flash.net.URLRequest;	import flash.net.URLRequestMethod;	import flash.net.URLLoader;	import flash.net.URLLoaderDataFormat;	import flash.net.URLVariables;	import flash.events.Event;	import flash.events.IOErrorEvent;	import flash.errors.IOError;		public class EmailProgram {		protected var _typewriter:Typewriter;        protected var _sendEmailScript:String;		public function EmailProgram(typewriter:Typewriter) {			_typewriter = typewriter;		}		public function sendEmail():void {			var loader:URLLoader = new URLLoader();			var message:URLRequest = new URLRequest(_sendEmailScript);			message.method = URLRequestMethod.POST;			loader.dataFormat = URLLoaderDataFormat.VARIABLES;			var variables = new URLVariables();						_typewriter.readLine(function (u:String):void {				variables.sender_mail = u;				trace(u)					_typewriter.readLine(function (f:String):void {                         variables.destination_addr = f;                         trace(f)                         _typewriter.readLine(function (f:String):void {                            variables.sender_subject = f;                            trace(f)                            _typewriter.readLine(function (f:String):void {                                 variables.sender_message = f;                                 trace(f)                                 message.data = variables;                                 loader.addEventListener(Event.COMPLETE, function (e:Event):void {                                    _typewriter.writeLine("EMAIL SENT.");                                    trace(URLLoader(e.target).data.output);                                 });                                 loader.addEventListener(IOErrorEvent.IO_ERROR, function (e:IOError):void {                                    _typewriter.writeLine("A NETWORK ERROR OCCURRED. COULD NOT SEND MESSAGE.");                                 });                                 loader.load(message);                                 }, "WHAT IS THE BODY OF THE MESSAGE? PLEASE TYPE EOFAT THE END OF THE LAST LINE OF YOUR MESSAGE BODY", true);                            }, "WHAT IS THE SUBJECT OF THE MESSAGE?");                         }, "WHAT IS THE RECIPIENT'S E-MAIL ADDRESS?");				}, "WHAT IS YOUR E-MAIL ADDRESS?");		}	}	}